<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.24.1" />
  <meta name="author" content="Guangchuang YU">
  <meta name="description" content="Postdoc researcher">

  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="/css/highlight.min.css">
    
  
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/academicons.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather%7CRoboto+Mono">
  <link rel="stylesheet" href="/css/hugo-academic.css">
  

  <link rel="alternate" href="https://guangchuangyu.github.io/index.xml" type="application/rss+xml" title="Guangchuang YU">
  <link rel="feed" href="https://guangchuangyu.github.io/index.xml" type="application/rss+xml" title="Guangchuang YU">

  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/apple-touch-icon.png">

  <link rel="canonical" href="https://guangchuangyu.github.io/2017/10/create-meme-in-r/">

  

  <title>create meme in R | Guangchuang YU</title>


</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Guangchuang YU</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#publications_selected">
            
            <span>Publications</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#teaching">
            
            <span>Teaching</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/resume">
            
            <span>Resume</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/cn">
            
            <span>‰∏≠ÊñáÂÖ•Âè£</span>
          </a>
        </li>

        
        

        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  

  <div class="article-container">
    <h1 itemprop="name">create meme in R</h1>
    

<div class="article-metadata">

  <span class="article-date">
    <time datetime="2017-10-25 15:13:35 &#43;0800 CST" itemprop="datePublished">
      Wed, Oct 25, 2017
    </time>
  </span>

  
  
  
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="/categories/r">R</a
    >, 
    
    <a href="/categories/visualization">Visualization</a
    >
    
  </span>
  
  

  
  
  
  <span class="article-tags">
    <i class="fa fa-tags"></i>
    
    <a href="/tags/grid">grid</a
    >, 
    
    <a href="/tags/meme">meme</a
    >
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fguangchuangyu.github.io%2f2017%2f10%2fcreate-meme-in-r%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=create%20meme%20in%20R&amp;url=https%3a%2f%2fguangchuangyu.github.io%2f2017%2f10%2fcreate-meme-in-r%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fguangchuangyu.github.io%2f2017%2f10%2fcreate-meme-in-r%2f&amp;title=create%20meme%20in%20R"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=https%3a%2f%2fguangchuangyu.github.io%2f2017%2f10%2fcreate-meme-in-r%2f&amp;title=create%20meme%20in%20R"
         target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=create%20meme%20in%20R&amp;body=https%3a%2f%2fguangchuangyu.github.io%2f2017%2f10%2fcreate-meme-in-r%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    <div class="article-style" itemprop="articleBody">
      <p>I developed a tiny toy package, <code>meme</code>, which is now on CRAN. As it&rsquo;s name indicated, it was designed to create memes, which are captioned photos that are intended to be funny, riduculous.</p>

<h2 id="meme"><code>meme()</code></h2>

<p>The package is quite simple. You can use <code>meme()</code> function to add meme captions, and this is all the package supposed to do:</p>

<pre><code class="language-r">library(meme)
u &lt;- &quot;http://www.happyfamilyneeds.com/wp-content/uploads/2017/08/angry8.jpg&quot;
meme(u, &quot;code&quot;, &quot;all the things!&quot;)
</code></pre>

<p><img src="https://guangchuangyu.github.io/blog_images/R/meme/Figs/unnamed-chunk-2-1.png" alt="" /></p>

<p></p>

<h2 id="the-grammar">the grammar üôà</h2>

<p>The <code>meme</code> package was implemented using <code>grid</code> graphic system. Since <code>grid</code> is the most flexible graphic system in R, I try to mimic <code>ggplot2</code> (although very superficial) for practice.</p>

<p>User can use <code>mmplot()</code> to read and plot the input image and then using <code>+ mm_caption()</code> to add meme captions.</p>

<pre><code class="language-r">mmplot(u) + mm_caption(&quot;calm down&quot;, &quot;and RTFM&quot;, color=&quot;purple&quot;)
</code></pre>

<p><img src="https://guangchuangyu.github.io/blog_images/R/meme/Figs/unnamed-chunk-3-1.png" alt="" /></p>

<h2 id="meme-save"><code>meme_save()</code></h2>

<p>The <code>meme</code> output can be saved as an object, and can be exported to file using <code>ggsave()</code>. Since we would like to keep the original figure aspect ratio for output meme figure, I provide a helper function, <code>meme_save()</code>, which takes care of the figure aspect ratio and then called <code>ggsave()</code> to export the figure.</p>

<pre><code class="language-r">u2 &lt;- &quot;http://i0.kym-cdn.com/entries/icons/mobile/000/000/745/success.jpg&quot;
x &lt;- meme(u2, &quot;please&quot;, &quot;tell me more&quot;)
meme_save(x, file=&quot;docs/Figs/meme.png&quot;)
</code></pre>

<p><img src="https://guangchuangyu.github.io/blog_images/R/meme/Figs/meme.png" width="672"/></p>

<h2 id="the-plot-method">the <code>plot</code> method</h2>

<p>Users can <code>plot</code> the <code>meme()</code> output and change the caption or other parameters in real time.</p>

<pre><code class="language-r">plot(x, size = 2, &quot;happy friday!&quot;, &quot;wait, sorry, it's monday&quot;, color = &quot;firebrick&quot;, font = &quot;Courier&quot;)
</code></pre>

<p><img src="https://guangchuangyu.github.io/blog_images/R/meme/Figs/unnamed-chunk-5-1.png" alt="" /></p>

<h2 id="the-method">the <code>+</code> method</h2>

<p>Instead of using parameters in <code>plot()</code> explictely, Users can use <code>+ aes()</code> to set the plot parameters:</p>

<pre><code class="language-r">x + aes(upper = &quot;#barbarplots&quot;,
        lower = &quot;friends don't let friends make bar plots&quot;,
        color = firebrick, font = Courier, size=1.5)
</code></pre>

<p><img src="https://guangchuangyu.github.io/blog_images/R/meme/Figs/unnamed-chunk-6-1.png" alt="" /></p>

<p>or using <code>+ list()</code>. The following command will also generate the figure displayed above.</p>

<pre><code class="language-r">x + list(upper = &quot;#barbarplots&quot;,
        lower = &quot;friends don't let friends make bar plots&quot;,
        color = &quot;firebrick&quot;, font = &quot;Courier&quot;, size=1.5)
</code></pre>

<h2 id="multi-language-support">multi-language support</h2>

<p>I didn&rsquo;t do anything about it. Multi-language was supported internally. Just simply select a font for your language.</p>

<pre><code class="language-r">y &lt;- meme(u, &quot;ÂçßÊßΩ&quot;, &quot;Âê¨ËØ¥‰Ω†ÊÉ≥Áî®‰∏≠Êñá&quot;, font=&quot;STHeiti&quot;)
y
</code></pre>

<p><img src="https://guangchuangyu.github.io/blog_images/R/meme/Figs/unnamed-chunk-8-1.png" alt="" /></p>

<hr />

<p>As the <code>meme</code> package was developed using <code>grid</code>, It would be better to provide function to convert the output object to <code>grob</code>. Similar to <code>ggplotGrob()</code> for <code>ggplot</code> object, I provide <code>memeGrob()</code> for the <code>meme</code> object and this making it possible to edit the details of the graph and compatible with the <code>grid</code> ecosystem.</p>

<p>Here are the examples of using <code>meme</code> in <code>grid</code>, <code>ggplot2</code> and <code>cowplot</code>.</p>

<h2 id="grid-support">grid support</h2>

<pre><code class="language-r">library(grid)
mm &lt;- meme(u, &quot;code&quot;, &quot;all the things!&quot;, size=.3, color='firebrick')

grid.newpage()
pushViewport(viewport(width=.9, height=.9))
grid.rect(gp = gpar(lty=&quot;dashed&quot;))

xx &lt;- seq(0, 2*pi , length.out=10)
yy &lt;- sin(xx)

for (i in seq_along(xx)) {
    vp &lt;- viewport(x = xx[i]/(2*pi), y = (yy[i]-min(yy))/2, width=.05, height=.05)
    print(mm, vp = vp)
}
</code></pre>

<p><img src="https://guangchuangyu.github.io/blog_images/R/meme/Figs/unnamed-chunk-9-1.png" alt="" /></p>

<h2 id="ggplot2-support">ggplot2 support</h2>

<pre><code class="language-r">library(ggplot2)
library(ggimage)

d &lt;- data.frame(x = xx, y = yy)
ggplot(d, aes(x, y)) + geom_line() +
    geom_subview(mm, x = xx, y = yy, width=.3, height=.15)
</code></pre>

<p><img src="https://guangchuangyu.github.io/blog_images/R/meme/Figs/unnamed-chunk-10-1.png" alt="" /></p>

<pre><code class="language-r">ggplot(d, aes(x, y)) +
    geom_subview(mm+aes(size=3), x=0, y=0, width=Inf, height=Inf) +
    geom_point() + geom_line()
</code></pre>

<p><img src="https://guangchuangyu.github.io/blog_images/R/meme/Figs/unnamed-chunk-10-2.png" alt="" /></p>

<h2 id="cowplot-support">cowplot support</h2>

<pre><code class="language-r">cowplot::plot_grid(x, y, ncol=1, labels = c(&quot;A&quot;, &quot;B&quot;))
</code></pre>

<p><img src="https://guangchuangyu.github.io/blog_images/R/meme/Figs/unnamed-chunk-11-1.png" alt="" /></p>
    </div>
  </div>

</article>

<div class="container">
  <nav>
  <ul class="pager">
    
    <li class="previous"><a href="https://guangchuangyu.github.io/2017/08/joyplot-for-gsea-result/"><span
      aria-hidden="true">&larr;</span> joyplot for GSEA result</a></li>
    

    
  </ul>
</nav>

</div>

<div class="article-container">
  
<section id="comments">
  <div id="disqus_thread">
    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'gcyu';
    var disqus_identifier = 'https:\/\/guangchuangyu.github.io\/2017\/10\/create-meme-in-r\/';
    var disqus_title = 'create meme in R';
    var disqus_url = 'https:\/\/guangchuangyu.github.io\/2017\/10\/create-meme-in-r\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</section>


</div>

<footer class="site-footer">
  <div style="width:350px;margin:auto;">
<script type="text/javascript" src="//rf.revolvermaps.com/0/0/7.js?i=5qpvv5zz7fp&amp;m=0&amp;c=ff0000&amp;cr1=ffffff&amp;sx=0" async="async"></script>
</div>
  <div class="container">
    <p class="powered-by">

      &copy; 2016 Guangchuang YU &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.4/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
    <script src="/js/jquery-1.12.3.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/isotope.pkgd.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.1/imagesloaded.pkgd.min.js"></script>
    <script src="/js/hugo-academic.js"></script>
    

    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-77901140-1', 'auto');
        ga('send', 'pageview');

         
        var links = document.querySelectorAll('a');
        Array.prototype.map.call(links, function(item) {
            if (item.host != document.location.host) {
                item.addEventListener('click', function() {
                    var action = item.getAttribute('data-action') || 'follow';
                    ga('send', 'event', 'outbound', action, item.href);
                });
            }
        });
    </script>
    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  </body>
</html>

